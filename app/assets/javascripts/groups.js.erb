$(function () {
  $('.count').tooltip({delay: { show: 500, hide: 100 }});
  
  if ($('#user_chart')[0]){
    $('#user_chart').highcharts({
    chart: {
      type: 'line',
      marginRight: 130,
      marginBottom: 25
    },
    title: {
      text: 'Group Star Chart',
      x: -20 //center
    },
    xAxis: {
      categories: <%= ChartHelper.build_x_axis %>
    },
    yAxis: {
      title: {
        text: 'Stars'
    }},
    plotLines: [{
      value: 0,
      width: 1,
      color: '#808080'
    }],
    tooltip: {
      valueSuffix: ' stars'
    },
    legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      x: -10,
      y: 100,
      borderWidth: 0
    },
    series: [
      <% User.includes.each do |user| %>
      {
          name: '<%= user.name %>',
          data: <%= ChartHelper.build_achievements_for(user) %>
      },
      <% end %>
    ]
  });
  }
});


