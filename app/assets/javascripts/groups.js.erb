$(function () {
  console.log("student chart loaded");
  if ($('#user_chart')[0]){
    $('#user_chart').highcharts({
    chart: {
      type: 'line',
      marginRight: 130,
      marginBottom: 25
    },
    title: {
      text: 'Group Star Chart',
      x: -20 //center
    },
    xAxis: {
      type: 'datetime',
      maxZoom: 130 * 24 * 3600000,
      title: {
        text: null
      }
    },
    yAxis: {
      title: {
        text: 'Stars'
    }},
    plotLines: [{
      value: 0,
      width: 1,
      color: '#808080'
    }],
    tooltip: {
      valueSuffix: ' stars'
    },
    legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      x: 20,
      y: 100,
      borderWidth: 0
    },
    series: [
      <% User.includes.each do |user| %>
        {
          name: '<%= user.name %>',
          pointInterval: 24 * 3600 * 1000,
          marker: {
            radius: 0
          },
          // pointStart: Date.UTC(<%= (Time.now - 130.days).to_i %>),
          data: [<%= user.thbadges %>]
        },
      <% end %>
    ]
  });
  }
});


